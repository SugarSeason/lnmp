#!/bin/sh
#
# MongoDB		Startup script for MongoDB
#
# processname: mongod
# config: /etc/mongod/mongod.conf
# config: /etc/sysconfig/mongod
# pidfile: /var/run/mongod.pid
#
mongod=/usr/local/mongodb/bin/mongod
configFile=/usr/local/mongodb/etc/mongodb.conf
mongodPid=/var/run/mongod.pid
RETVAL=0
prog="MongoDB"

# Source function library.
. /etc/rc.d/init.d/functions
# Source networking configuration.
. /etc/sysconfig/network
# Check that networking is up.
[ ${NETWORKING} = "no" ] && exit 0
[ -x $mongod ] || exit 0
# Start MongoDB daemons functions.
start() {
if [ -e $mongodPid ];then
   echo "MongoDB already running...."
   exit 1
fi
   echo -n $"Starting $prog: "
   daemon $mongod -f ${configFile}
   RETVAL=$?
   echo
   [ $RETVAL = 0 ] && touch /var/lock/subsys/mongod
   return $RETVAL
}
# Stop MongoDB daemons functions.
stop() {
	echo -n $"Stopping $prog: "
	killproc $mongod
	RETVAL=$?
	echo
	[ $RETVAL = 0 ] && rm -f /var/lock/subsys/mongod /var/run/mongod.pid
}
# See how we were called.
case "$1" in
start)
	start
	;;
stop)
	stop
	;;
restart)
	stop
	start
	;;

status)
	status $prog
	RETVAL=$?
	;;
*)
	echo $"Usage: $prog {start|stop|restart|reload|status|help}"
	exit 1
esac
exit $RETVAL